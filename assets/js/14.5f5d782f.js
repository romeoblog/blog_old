(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{250:function(t,a,s){"use strict";s.r(a);var e=s(4),n=Object(e.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"centos-7-安装-docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#centos-7-安装-docker","aria-hidden":"true"}},[t._v("#")]),t._v(" CentOS 7 安装 Docker")]),t._v(" "),s("h2",{attrs:{id:"准备工作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备工作","aria-hidden":"true"}},[t._v("#")]),t._v(" 准备工作")]),t._v(" "),s("h3",{attrs:{id:"系统要求"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#系统要求","aria-hidden":"true"}},[t._v("#")]),t._v(" 系统要求")]),t._v(" "),s("p",[t._v("Docker CE 支持 64 位版本 CentOS 7，并且要求内核版本不低于 3.10。 CentOS 7 满足最低内核的要求，但由于内核版本比较低，部分功能无法使用，并且部分功能可能不太稳定。")]),t._v(" "),s("p",[t._v("1、首先要确定是否是 CenOS 7 版本以上")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/redhat-release\n")])])]),s("p",[t._v("2、确定内核是否是3.1.0以上")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("uname")]),t._v(" -a\n")])])]),s("h2",{attrs:{id:"安装-gcc-相关工具包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-gcc-相关工具包","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 gcc 相关工具包")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum -y "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" gcc c++\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看是否安装成功")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" gcc -v\n")])])]),s("h2",{attrs:{id:"卸载-docker-旧版本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载-docker-旧版本","aria-hidden":"true"}},[t._v("#")]),t._v(" 卸载 Docker 旧版本")]),t._v(" "),s("p",[t._v("较旧版本的Docker引擎，如果已安装这些，需要先卸载它们以及相关的依赖项。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum remove docker \\\n                  docker-client \\\n                  docker-client-latest \\\n                  docker-common \\\n                  docker-latest \\\n                  docker-latest-logrotate \\\n                  docker-logrotate \\\n                  docker-engine\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提示没有安装这些软件包，则OK，否则将会删除 /var/lib/docker/ 目录的数据，")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这个目录包含了镜像、容器、卷和网络等相关数据和配置")]),t._v("\n")])])]),s("h2",{attrs:{id:"使用-yum-安装需要的包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-yum-安装需要的包","aria-hidden":"true"}},[t._v("#")]),t._v(" 使用 yum 安装需要的包")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y yum-utils \\\n  device-mapper-persistent-data \\\n  lvm2\n")])])]),s("h2",{attrs:{id:"设置stable镜像仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置stable镜像仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 设置Stable镜像仓库")]),t._v(" "),s("p",[t._v("当前官方提供的国外源，很容器出现网络问题，造成安装失败，鉴于国内网络问题，我们使用国内阿里源。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum-config-manager \\\n    --add-repo \\\n    http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo\n\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 官方源")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# $ sudo yum-config-manager \\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     --add-repo \\")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     https://download.docker.com/linux/centos/docker-ce.repo ")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"安装-docker-ce"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-docker-ce","aria-hidden":"true"}},[t._v("#")]),t._v(" 安装 Docker CE")]),t._v(" "),s("p",[t._v("更新 "),s("code",[t._v("yum")]),t._v(" 软件源缓存，并安装 "),s("code",[t._v("docker-ce")]),t._v("。")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum makecache fast\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" docker-ce docker-ce-cli containerd.io\n")])])]),s("h2",{attrs:{id:"启动-docker-ce"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#启动-docker-ce","aria-hidden":"true"}},[t._v("#")]),t._v(" 启动 Docker CE")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl start docker\n")])])]),s("h2",{attrs:{id:"测试-docker-是否安装正确"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#测试-docker-是否安装正确","aria-hidden":"true"}},[t._v("#")]),t._v(" 测试 Docker 是否安装正确")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker run hello-world\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此命令下载测试映像并在容器中运行它。当容器运行时，它会打印一条信息 Hello from Docker! 并退出。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 说明安装成功！")]),t._v("\n\nUnable to "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),t._v(" image "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hello-world:latest'")]),t._v(" locally\nlatest: Pulling from library/hello-world\n1b930d010525: Pull complete \nDigest: sha256:6540fc08ee6e6b7b63468dc3317e3303aae178cb8a45ed3123180328bcc1d20f\nStatus: Downloaded newer image "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" hello-world:latest\n\nHello from Docker"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n 1. The Docker client contacted the Docker daemon.\n 2. The Docker daemon pulled the "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"hello-world"')]),t._v(" image from the Docker Hub.\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n 3. The Docker daemon created a new container from that image "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("which")]),t._v(" runs the\n    executable that produces the output you are currently reading.\n 4. The Docker daemon streamed that output to the Docker client, "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("which")]),t._v(" sent it\n    to your terminal.\n\nTo try something "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" ambitious, you can run an Ubuntu container with:\n $ docker run -it ubuntu "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v("\n\nShare images, automate workflows, and "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" with a "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("free")]),t._v(" Docker ID:\n https://hub.docker.com/\n\nFor "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" examples and ideas, visit:\n https://docs.docker.com/get-started/\n\n")])])]),s("h2",{attrs:{id:"镜像加速"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#镜像加速","aria-hidden":"true"}},[t._v("#")]),t._v(" 镜像加速")]),t._v(" "),s("p",[t._v("ps: 鉴于国内网络问题，后续拉取 Docker 镜像十分缓慢，强烈建议安装 Docker 之后配置 "),s("code",[t._v("国内镜像加速")]),t._v("。")]),t._v(" "),s("ul",[s("li",[t._v("通过修改 "),s("code",[t._v("daemon")]),t._v(" 配置文件 "),s("code",[t._v("/etc/docker/daemon.json")]),t._v(" 来使用加速器")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" -p /etc/docker\n")])])]),s("ul",[s("li",[t._v("使用阿里云镜像源")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("vi")]),t._v(" /etc/docker/daemon.json\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加一下镜像源")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"registry-mirrors"')]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://[编码id].mirror.aliyuncs.com"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 编码id 通过 https://cr.console.aliyun.com 获取阿里云镜像源地址")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"重启docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重启docker","aria-hidden":"true"}},[t._v("#")]),t._v(" 重启docker")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl daemon-reload\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl restart docker\n")])])]),s("h2",{attrs:{id:"卸载docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#卸载docker","aria-hidden":"true"}},[t._v("#")]),t._v(" 卸载docker")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" systemctl stop docker\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" yum -y remove docker-ce\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf /var/lib/docke \n")])])]),s("h2",{attrs:{id:"参考文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文档","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/centos/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 官方 CentOS 安装文档"),s("OutboundLink")],1)])])},[],!1,null,null,null);a.default=n.exports}}]);